# 4차 스터디
NSCache

Declaration
class NSCache<KeyType, ObjectType> : NSObject where KeyType : AnyObject, ObjectType : AnyObject


```swift
func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
       
       
       guard let cell = boxOfficeTableView.dequeueReusableCell(withIdentifier: "BoxCell", for: indexPath) as? BoxOfficeTableViewCell else{
           return UITableViewCell()
       }
       
       cell.movieNameLabel.text = "\(movies[indexPath.row].title)"
       
       cell.moviePosterImageView.image = nil
       
   
  
       
       
       DispatchQueue.global().async {
           guard let imageURL = URL(string: self.movies[indexPath.row].thumb) else { return  }
           guard let imageData: Data = try? Data(contentsOf: imageURL) else { return  }
           self.moviesImageCache.setObject(UIImage(data: imageData)!, forKey: self.movies[indexPath.row].thumb as NSString)
           DispatchQueue.main.async {
               
               if let index: IndexPath = self.boxOfficeTableView.indexPath(for: cell){
                   if index.row == indexPath.row{
                       
                      //  cell.moviePosterImageView.image = UIImage(data: imageData)
                       
                       if let cachedImage = self.moviesImageCache.object(forKey: self.movies[indexPath.row].thumb as NSString){

                           cell.moviePosterImageView.image = cachedImage
                           print("캐시 됩니당 \(cachedImage)")
                       }else{
                           print("cache 안될때 입니다 ")

                       }
                       
                       
                   }
               }
               
               
           }
       }
       
       return cell
   }
   
```


